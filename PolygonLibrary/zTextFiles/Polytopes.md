# Формат файла многогранника

> Поля записаны в стандартной нотации см. [тут](FieldsFormat.md)

> Порядок полей **важен**

---

## Структура файла

`Type = "S";` -- способ задания многогранника

Корректные значения `S`: `CGLibrary`, `Convex Hull`, `Hyper Planes`, `Generator`

В зависимости от значения поля `Type` дальнейшая структура файла будет различной.

### CGLibrary

Многогранник записан в формате библиотеки см. [тут](LibPolytopeFormat.md)

```
Type = "CGLibrary";
[многогранник в формате библиотеки]
```

### Convex Hull
Многогранник записан своими вершинами.
```
Type  = "Convex Hull";
VsQnt =  N;  // количество веришн
VsDim =  N;  // количество координат у вершин
D D ...  D   // VsDim штук -- перечисляем все координаты первой вершины
D D ...  D 
    ...
D D ...  D 
// VsQnt строк
```

#### Пример. Квадрат
```
Type  = "Convex Hull";
VsQnt = 4;
VsDim = 2;
0 0
0 1
1 0
1 1
```

### Hyper Planes
Многогранник задан пересечением полупространств. Векторы нормалей должны быть направлены "наружу" многогранника.
```
Type   = "Hyper Planes";
HPsQnt = N;  // количество гиперплоскостей
HPsDim = N;  // размерность векторов нормалей у гиперплоскостей
D D ... D D  // HPsDim + 1 штука. Первые HPsDim штук -- это координаты нормали, последняя -- это свободный член в правой части
    ...
D D ... D D
// HPsQnt штук
```

#### Пример. Квадрат
```
Type   = "Hyper Planes";
HPsQnt = 4;
HPsDim = 2;
 0  1  1
 1  0  1
 0 -1  0
-1  0  0
```

### Generator
Многогранник, который умеет создавать CGLibrary, заданный параметрически

Далее идёт поле
`Generator Type = "S";`  -- тип функции-генератора

Корректные значения `S`: `RectParallel`, `Sphere`, `Ellipsoid` 

В зависимости от значения поля `Generator Type` дальнейшая структура файла будет различной.

#### RectAxisParallel
```
Type           = Generator;
Generator Type = RectAxisParallel;
Left           = 1D<D>;  // Минимальная  вершина параллепипеда в лексикографическом порядке
Right          = 1D<D>;  // Максимальная вершина параллепипеда в лексикографическом порядке
```

##### Пример. Квадрат
```
Type           = Generator;
Generator Type = RectAxisParallel;
Left           = {0,0};
Right          = {1,1};
```


#### Sphere
Некоторое приближение многогранником сферы единичного радиуса с центром в начале координат. 

```
Type           = Generator;
Generator Type = Sphere;
Dim            = N;  // Размерность сферы
```
Если `Dim` $= 2$, то следующее поле

`Azimuth = N;` -- Количество точек разбиения сферы по каждому из азимутных углов.

Иначе следуют два поля:
```
Polar   = N;  // Количество точек разбиения сферы по зенитному углу. В 2D-случае эта строка отсутствует.
Azimuth = N;  // Количество точек разбиения сферы по каждому из азимутных углов.
```

##### Пример. Квадрат
```
Type           = Generator;
Generator Type = Sphere;
Dim            = 2;
Azimuth        = 4;
```

#### Ellipsoid

Некоторое приближение многогранником эллипсоида с центром в начале координат.

```
Type           = Generator;
Generator Type = Ellipsoid;
Dim            = N;         // Размерность эллипсоида
Axis           = 1D<D>;     // Длины полуосей эллипсоида
```

Если `Dim` $= 2$, то следующее поле

`Azimuth = N;` -- Количество точек разбиения эллипсоида по каждому из азимутных углов.

Иначе следуют два поля:

```
Polar   = N;  // Количество точек разбиения эллипсоида по зенитному углу. В 2D-случае эта строка отсутствует.
Azimuth = N;  // Количество точек разбиения эллипсоида по каждому из азимутных углов.
```

##### Пример. Квадрат

```
Type           = Generator;
Generator Type = Ellipsoid;
Dim            = 2;
Axis           = {1,1};
Azimuth        = 4;
```
